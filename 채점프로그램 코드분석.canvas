{
	"nodes":[
		{"id":"3cf882c540ec3ef1","x":-461,"y":-460,"width":1101,"height":1400,"type":"text","text":"```java\n\npackage com.sideproject.grading.controller;\n\nimport com.sideproject.grading.domain.SelectedAnswerManager;\nimport com.sideproject.grading.service.AnswerSelectionService;\nimport jakarta.servlet.http.HttpServletRequest;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\n\nimport java.util.Enumeration;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Controller\npublic class AnswerSelectionController {\n    private final AnswerSelectionService answerSelectionService;\n\n    @Value(\"${answer.totalCount}\")\n    int totalCount;\n\n    @Value(\"${page.limitCount}\")\n    int limitCount;\n\n    public AnswerSelectionController(AnswerSelectionService answerSelectionService) {\n        this.answerSelectionService = answerSelectionService;\n    }\n\n    @GetMapping(\"/answer-selection\")\n    public String answerSelection(@RequestParam(value = \"page\", defaultValue = \"1\") int page, Model model) {\n        model.addAttribute(\"page\", page);\n        model.addAttribute(\"totalCount\", totalCount);\n        model.addAttribute(\"limitCount\", limitCount);\n\n        return \"answer-selection\";\n    }\n\n    @PostMapping(\"/questions/next\")\n    public String next(HttpServletRequest request) {\n        Map<String, String> parameters = new HashMap<>();\n\n        Enumeration<String> parameterNames = request.getParameterNames();\n        while (parameterNames.hasMoreElements()) {\n            String paramName = parameterNames.nextElement();\n            parameters.put(paramName, request.getParameter(paramName));\n        }\n\n        SelectedAnswerManager.setSelectedAnswers(answerSelectionService.getSelectedAnswers(parameters));\n\n\n        int nextPage = answerSelectionService.getPage(parameters);\n\n        if (nextPage > totalCount / limitCount) {\n            return \"redirect:/result\";\n        }\n\n        return \"redirect:/answer-selection?page=\" + nextPage;\n    }\n\n}\n```\n"},
		{"id":"35c808a9d02c568f","x":-461,"y":-560,"width":506,"height":79,"type":"text","text":"# 사지선다 Radio 관리"},
		{"id":"614c21290ffe2762","x":1339,"y":-20,"width":1021,"height":1340,"type":"text","text":"```java\n\npackage com.sideproject.grading.controller;\n\nimport com.sideproject.grading.domain.SelectedAnswer;\nimport com.sideproject.grading.domain.SelectedAnswerManager;\nimport com.sideproject.grading.service.WrongAnswerService;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\n\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\n@Controller\npublic class GradingController {\n\n\t//틀린문제 핸들링하는 서비스단 가져오기\n    private WrongAnswerService wrongAnswerService;\n\n\t//이 컨트롤러에서 사용할 수 있게 만들어주기\n\t//🤔나는 그냥 Autowired 로 했는데 이렇게 해주는 이유가 있는지 private으로 하면 더 좋다고는 하는데 \n    public GradingController(WrongAnswerService wrongAnswerService) {\n        this.wrongAnswerService = wrongAnswerService;\n    }\n\n\t//start html 연결\n    @GetMapping(\"/\")\n    public String start() {\n        return \"start\";\n    }\n\n\t//result html 연결\n    @GetMapping(\"/result\")\n    public String result() {\n        return \"result\";\n    }\n\n    @GetMapping(\"/wrong-answer\")\n    public String wrongAnswer(Model model) {\n        // TODO answer-selection 에서 받아올 데이터\n        // answer-selection 에서 데이터 받아와서 \n        // Radio 번호,  answer-selection 에서 받아온 선택된 데이터 형식으로 저장 \n        Map<Integer, SelectedAnswer> testAnswers = new HashMap<>();\n        testAnswers.put(1, new SelectedAnswer(1, 2));\n        testAnswers.put(2, new SelectedAnswer(2, 4));\n        testAnswers.put(3, new SelectedAnswer(3, 2));\n    \n\t    //👀이 메서드 먼지 찾아보기\n        SelectedAnswerManager.setSelectedAnswers(testAnswers);\n\t\t//👀이 메서드 먼지 찾아보기\n\t\t//wrongAnswerService에 getWrongAnswers() 이 함수를 실행해서 숫자를 받아오는데 뭘 받아오는거지 \n        List<Integer> wrongAnswers = wrongAnswerService.getWrongAnswers();\n\t\t//받아온 값 wrong-answer.HTML로 넘기기\n        model.addAttribute(\"wrongAnswers\", wrongAnswers);\n\n        return \"wrong-answer\";\n    }\n}\n```"},
		{"id":"e874f2d333a1f4b5","x":1339,"y":-89,"width":301,"height":69,"type":"text","text":"## GradingController"},
		{"id":"2236a740fe701643","x":1339,"y":-150,"width":276,"height":61,"type":"text","text":"# CONTROLLER"},
		{"id":"a73fb635bf7e33c4","x":3640,"y":210,"width":970,"height":880,"type":"text","text":"```JAVA\npackage com.sideproject.grading.service;  \n  \nimport com.sideproject.grading.domain.CorrectAnswers;  \nimport com.sideproject.grading.domain.SelectedAnswer;  \nimport com.sideproject.grading.domain.SelectedAnswerManager;  \nimport org.springframework.beans.factory.annotation.Autowired;  \nimport org.springframework.stereotype.Service;  \n  \nimport java.util.ArrayList;  \nimport java.util.List;  \nimport java.util.Map;  \nimport java.util.Set;  \n  \n@Service  \npublic class WrongAnswerService {  \n\n\t//여기서 빈을 한번 더 주입하는 이유\n    @Autowired  \n    public WrongAnswerService() {}  \n  \n    public List<Integer> getWrongAnswers() {  \n        List<Integer> wrongAnswers = new ArrayList<>();  \n  \n        Map<Integer, Integer> correctAnswers = CorrectAnswers.getAnswers();  \n  \n        Map<Integer, SelectedAnswer> selectedAnswers = SelectedAnswerManager.getSelectedAnswers();  \n  \n        Set<Map.Entry<Integer, SelectedAnswer>> entries = selectedAnswers.entrySet();  \n        for (Map.Entry<Integer, SelectedAnswer> entry: entries) {  \n            int correctAnswer = correctAnswers.get(entry.getKey());  \n            if (entry.getValue().getAnswer() != correctAnswer) {  \n                wrongAnswers.add(entry.getKey());  \n            }  \n        }  \n  \n        return wrongAnswers;  \n    }  \n}\n``` "},
		{"id":"017e25f780058752","x":2640,"y":608,"width":700,"height":85,"type":"text","text":"```JAVA\nList<Integer> wrongAnswers = wrongAnswerService.getWrongAnswers();\n```\n"}
	],
	"edges":[
		{"id":"df7ce6d5ecc71b28","fromNode":"614c21290ffe2762","fromSide":"right","toNode":"a73fb635bf7e33c4","toSide":"left"},
		{"id":"7c4df056e17f15e0","fromNode":"a73fb635bf7e33c4","fromSide":"left","toNode":"614c21290ffe2762","toSide":"right"}
	]
}