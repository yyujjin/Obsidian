{
	"nodes":[
		{"id":"037fbe32889855e4","type":"text","text":"@PostMapping(\"/login_yn\")\r\n    public String login_yn(@RequestParam HashMap<String, String> param, HttpServletRequest request, Model model) {\r\n        log.info(\"@# login_yn\");\r\n        String loginType = param.get(\"loginType\"); // ì‚¬ìš©ì ìœ í˜•(ê°œì¸/ê¸°ì—…)\r\n        ArrayList<MemDTO> user = service.loginYn(param);\r\n\r\n        if (user.isEmpty()) {\r\n            log.info(\"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\r\n            return \"redirect:login?error=true\";\r\n        }\r\n\r\n        MemDTO foundUser = user.get(0);\r\n\r\n        // ì‚¬ìš©ì ìœ í˜•ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸\r\n        if ((loginType.equals(\"individual\") && foundUser.getUserType() != -1) || (loginType.equals(\"enterprise\") && foundUser.getUserType() != 1)) {\r\n            log.info(\"ë¡œê·¸ì¸ ìœ í˜•ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\");\r\n            return \"redirect:login?error=true\";\r\n        }\r\n\r\n        // ì…ë ¥ëœ ë¹„ë°€ë²ˆí˜¸ê°€ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ëœ ë¹„ë°€ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸\r\n        if (!foundUser.getMemPwd().equals(param.get(\"memPwd\"))) {\r\n            log.info(\"ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\");\r\n            return \"redirect:login?error=true\";\r\n        }\r\n\r\n        // ì„¸ì…˜ì— ì‚¬ìš©ì ì •ë³´ ì €ì¥\r\n        HttpSession session = request.getSession();\r\n        session.setAttribute(\"user\", foundUser);\r\n        log.info(\"ì‚¬ìš©ì ì„¸ì…˜ ì €ì¥ ì™„ë£Œ: \" + foundUser.getMemId());\r\n        return \"redirect:main\";\r\n    }\r\n","x":620,"y":-1237,"width":250,"height":60},
		{"id":"c43dc24825c78d05","type":"text","text":"```java\n<!--ê°œì¸-->\n\n<form id=\"individualForm\" method=\"post\" action=\"/login_yn\">\n\n<input type=\"hidden\" name=\"loginType\" value=\"individual\">\n\n<div class=\"input-container\">\n\n<input type=\"text\" name=\"memId\" placeholder=\"ì•„ì´ë””\" required>\n\n</div>\n\n<div class=\"input-container\">\n\n<input type=\"password\" name=\"memPwd\" placeholder=\"ë¹„ë°€ë²ˆí˜¸\" required>\n\n</div>\n\n<button type=\"submit\">ë¡œê·¸ì¸</button>\n\n<span class=\"register-link\" data-type=\"individual\">íšŒì›ê°€ì…</span>\n\n</form>\n\n\n<!--ê¸°ì—…-->\n\n<form id=\"companyForm\" method=\"post\" action=\"/login_yn\" style=\"display: none;\">\n\n<input type=\"hidden\" name=\"loginType\" value=\"enterprise\">\n\n<div class=\"input-container\">\n\n<input type=\"text\" name=\"memId\" placeholder=\"ê¸°ì—…íšŒì›ì•„ì´ë””\" required>\n\n</div>\n\n<div class=\"input-container\">\n\n<input type=\"password\" name=\"memPwd\" placeholder=\"ë¹„ë°€ë²ˆí˜¸\" required>\n\n</div>\n\n<button type=\"submit\">ë¡œê·¸ì¸</button>\n\n<span class=\"register-link\" data-type=\"enterprise\">íšŒì›ê°€ì…</span>\n\n</form>\n```","x":-180,"y":-1720,"width":1140,"height":1080},
		{"id":"8c7cc097fcb066d1","type":"text","text":"# login.jsp","x":-180,"y":-1780,"width":250,"height":60},
		{"id":"f125be6adfc80906","type":"text","text":"## ë¡œê·¸ì¸ ê¸°ëŠ¥","x":70,"y":-1770,"width":276,"height":50},
		{"id":"71dc42c610125534","type":"text","text":"```java\n@PostMapping(\"/login_yn\")\n\n\n//ğŸ™‹â€â™€ï¸ íŒŒë¼ë¯¸í„°ë¥¼ ë„˜ê¸°ëŠ”ê²Œ ì•„ë‹ˆë¼ dtoë¡œ ë°”ë¡œ ë§¤í•‘í•˜ê²Œ í•˜ë©´ ì–´ë–°?\n\npublic String login_yn(@RequestParam HashMap<String, String> param, HttpServletRequest request, Model model) {\n\nlog.info(\"@# login_yn\"); \n\n\n//nameê³¼ valueê°€ ìˆëŠ” ê²ƒë“¤ì´ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜´ => ë¡œê·¸ì¸ íƒ€ì…(ê¸°ì—…, ê°œì¸), ì•„ì´ë””, ë¹„ë°€ë²ˆí˜¸ \n\n//{loginType=individual, memId=user01, memPwd=1234}\n\n\n\n//ğŸ“Œì»¨íŠ¸ë¡¤ëŸ¬ì™€ ì„œë¹„ìŠ¤ì˜ ê¸°ëŠ¥ì„ ëª…í™•íˆ êµ¬ë¶„í•˜ëŠ”ê²Œ ì¢‹ì„ ê²ƒê°™ìŒ\n\n//ğŸ“ŒUserManagementService ë¡œ ì„œë¹„ìŠ¤ ìƒì„±í•´ì„œ ë°‘ì— ì½”ë“œ ë„£ê¸°\n\n\n\n//ë¡œê·¸ì¸ íƒ€ì…ì„ í™•ì¸í•´ì„œ\n//ğŸ¤”ì—¬ê¸°ì„œ ë¡œê·¸ì¸ íƒ€ì…ì„ êµ³ì´ ì™œ í™•ì¸í•˜ëŠ” ê±°ì§€ ì–´ì°¨í”¼ íŒŒë¼ë¯¸í„° ë„˜ê¸¸ê»€ë°\n\nString loginType = param.get(\"loginType\"); // ì‚¬ìš©ì ìœ í˜•(ê°œì¸/ê¸°ì—…)\n\n//ğŸ“ŒListë¡œ ë³€ê²½í•˜ëŠ”ê²Œ ì¢‹ì„ ë“¯\n//ğŸ™‹â€â™€ï¸ì—¬ê¸°ë„ dtoë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê¸°ëŠ” ê±°ì§€\n//ğŸ¤”ê·¼ë° ì—¬ê¸°ì„œ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜ ë°›ì„ ê²Œ ì—†ì§€ì•Šë‚˜? ê·¸ëƒ¥ ì•„ì´ë””, ë¹„ë²ˆ ë§ëŠ”ì§€ í™•ì¸í•˜ëŠ”ê±´ë° ìœ ì € ì •ë³´ë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ì €ì¥í•˜ëŠ” ì½”ë“œëŠ” í•„ìš” ì—†ì„ ê²ƒ ê°™ìŒ.\n//ë§ˆì´ë°”í‹°ìŠ¤ ê¸°ëŠ¥ ì´ìš©í•´ì„œ ì¼ì¹˜ ìœ ë¬´ë§Œ í™•ì¸í•˜ë©´ ë  ê²ƒ ê°™ìŒ\n//ë‹¨ì§€ ë¡œê·¸ì¸ì²´í¬í•´ì„œ ì‚¬ìš©ì ì•„ì´ë””ë§Œ ë°›ì•„ì˜¬ê±°ë©´ ë¦¬ìŠ¤íŠ¸ê°€ ì•„ë‹Œ stringìœ¼ë¡œ ë°›ì•„ì˜¤ë©´ ë ë“¯\nArrayList<MemDTO> user = service.loginYn(param);\n\n```","x":2160,"y":-1497,"width":880,"height":857},
		{"id":"88e684814e2ded2f","type":"text","text":"##  service.loginYn(param)","x":3420,"y":-1462,"width":394,"height":62},
		{"id":"77a8ef49ea8c550a","type":"text","text":"# MemServiceImpl","x":3420,"y":-1520,"width":300,"height":58},
		{"id":"1329e917a6a7676e","type":"text","text":"```java\n package com.jjobkorea.service;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\n\nimport org.apache.ibatis.session.SqlSession;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.jdbc.core.RowMapper;\nimport org.springframework.stereotype.Service;\n\nimport com.jjobkorea.dto.MemDTO;\nimport com.jjobkorea.mapper.MemMapper;\nimport com.oracle.wls.shaded.org.apache.regexp.recompile;\n\nimport lombok.extern.slf4j.Slf4j;\n\n@Slf4j\n@Service\npublic class MemServiceImpl implements MemService {\n   @Autowired\n   private SqlSession sqlSession;\n\n    @Override\n    public ArrayList<MemDTO> loginYn(HashMap<String, String> param) {\n        log.info(\"@# MemServiceImpl loginYn\");\n\n        MemMapper mapper = sqlSession.getMapper(MemMapper.class);\n        \n        ArrayList<MemDTO> list = mapper.loginYn(param);\n\n        return list;\n    }\n\n    @Override\n    public void write(HashMap<String, String> param) {\n       MemMapper mapper = sqlSession.getMapper(MemMapper.class);\n       \n       mapper.write(param);\n    }\n       \n\n    @Override\n    public ArrayList<MemDTO> selectByCpId(HashMap<String, String> param) {\n       MemMapper mapper = sqlSession.getMapper(MemMapper.class);\n       \n       ArrayList<MemDTO> dto = mapper.selectByCpId(param);\n       \n       return dto;\n    }\n\n    @Override\n    public int checkCpRegistrationNum(HashMap<String, String> param) {\n       MemMapper mapper = sqlSession.getMapper(MemMapper.class);\n       \n       int dto = mapper.checkCpRegistrationNum(param);\n       \n       return dto; \n    }\n}\n \n```","x":15520,"y":5920,"width":1631,"height":1430},
		{"id":"b46289d3f737efc1","type":"text","text":"# ê· í˜¸ì”¨ ","x":15520,"y":5860,"width":250,"height":60},
		{"id":"0f128f8dd6b42b11","type":"text","text":"```java\n\n@Override\n//íŒŒë¼ë¯¸í„° ë„˜ì–´ì™€ì„œ \npublic ArrayList<MemDTO> loginYn(HashMap<String, String> param) {\n\n\n//ğŸ”¥ ì´ ì½”ë“œ ì‚­ì œí•˜ê¸°\nString sql = \"SELECT tb.memId, tb.memPwd, tb.memName, tb.cpId, cp.companyType, cp.companyRegistrationNum, cp.companyRepresentativeName, cp.companyName, cp.companyAddr, cp.companyBusinessRegistration AS companyBusinessRegistration, tb.userType FROM signup_tb tb LEFT JOIN signup_cp cp ON tb.cpId = cp.id WHERE tb.memId = ?\";\n//ğŸ“Œë§¤í¼ ì—°ê²°í•˜ëŠ” ì½”ë“œ ê°™ì€ë° ë§¤í¼ëª… ë°”ê¾¸ê³  íŒŒë¼ë¯¸í„°ë„ dtoë¡œ ë„˜ê¸°ê¸°\nList<MemDTO> result = jdbcTemplate.query(sql, memRowMapper, param.get(\"memId\"));\n\n  \n\nreturn new ArrayList<>(result);\n\n}\n```","x":3420,"y":-1400,"width":3020,"height":527},
		{"id":"bf688592c2b48fc9","type":"text","text":"JDBC(Java Database Connectivity)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì§ì ‘ì ìœ¼ë¡œ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ JDBCëŠ” `JdbcTemplate` í´ë˜ìŠ¤ë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ ì—°ê²°ì„ ê´€ë¦¬í•˜ê³ , SQL ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ì—¬ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì—­í• ","x":5260,"y":-1687,"width":1072,"height":107},
		{"id":"87639ccd5e0e8c31","type":"text","text":"# ì´ ì½”ë“œì˜ ì—­í• ?\n- ë§¤í¼ë¥¼ ë¶€ë¥´ì§€ ì•Šê³  í•´ë‹¹ ì„œë¹„ìŠ¤ ì½”ë“œì—ì„œ db ì—°ê²° ë‹¤ í•´ì„œ ì¿¼ë¦¬ë¬¸ ë‚ ë¦¬ê³  ê²°ê³¼ ë°›ì•„ì˜¤ëŠ” ê±° ê°™ìŒ ","x":3814,"y":-1600,"width":580,"height":200},
		{"id":"43c62152aa9cd1b1","type":"text","text":"## ë„ëŒ€ì²´ ì´ê²Œ ë­ì§€?\n- dtoì—ì„œ í•´ì•¼ë ê»„ ì™œ ì„œë¹„ìŠ¤ì—ì„œ í•˜ê³  ìˆì§€??\n- ë§ˆì´ë°”í‹°ìŠ¤ë¡œ ê°€ëŠ¥ í•œê±¸ RowMapper ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš©í•´ì„œ ìˆ˜ë™ìœ¼ë¡œ í•˜ê³  ìˆìŒ ","x":3967,"y":-3280,"width":680,"height":220},
		{"id":"6c8a83ec8cb68b11","type":"text","text":"# MemServiceImpl","x":3447,"y":-3120,"width":340,"height":60},
		{"id":"3e993d14296bbd08","type":"text","text":"```java\n\n//ğŸ”¥ ì´ ì½”ë“œ ì‚­ì œí•´ì•¼ í•  ê²ƒ ê°™ìŒ \n\n@Autowired\n\nprivate JdbcTemplate jdbcTemplate;\n\n  \n\nprivate RowMapper<MemDTO> memRowMapper = (rs, rowNum) -> {\n\nMemDTO mem = new MemDTO();\n\nmem.setMemId(rs.getString(\"memId\"));\n\nmem.setMemPwd(rs.getString(\"memPwd\"));\n\nmem.setMemName(rs.getString(\"memName\"));\n\nmem.setCpId(rs.getInt(\"cpId\"));\n\nmem.setCompanyType(rs.getString(\"companyType\"));\n\nmem.setCompanyRegistrationNum(rs.getString(\"companyRegistrationNum\"));\n\nmem.setCompanyRepresentativeName(rs.getString(\"companyRepresentativeName\"));\n\nmem.setCompanyName(rs.getString(\"companyName\"));\n\nmem.setCompanyAddr(rs.getString(\"companyAddr\"));\n\nmem.companyBusinessRegistration(rs.getString(\"companyBusinessRegistration\")); // ì´ í•„ë“œ ì‚¬ìš©\n\nmem.setUserType(rs.getInt(\"userType\"));\n\nreturn mem;\n\n};\n```","x":3447,"y":-3060,"width":1312,"height":900},
		{"id":"1a65f24c1edf15a4","type":"text","text":"`RowMapper` ì¸í„°í˜ì´ìŠ¤\n\n`private RowMapper<MemDTO> memRowMapper = (rs, rowNum) -> { ... };`ì—ì„œ `rs`ì™€ `rowNum`ì€ `RowMapper` ì¸í„°í˜ì´ìŠ¤ì˜ `mapRow` ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ì…ë‹ˆë‹¤.\n\n- `rs`ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•œ ê²°ê³¼ì¸ `ResultSet` ê°ì²´ì…ë‹ˆë‹¤.\n- `ResultSet` ê°ì²´ëŠ” ë°ì´í„°ë² ì´ìŠ¤ë¡œë¶€í„° ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, íŠ¹ì • í–‰(row)ì˜ ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œë“¤ì„ ì œê³µí•©ë‹ˆë‹¤.\n- `rs.getString(\"memId\")`, `rs.getInt(\"cpId\")` ë“±ê³¼ ê°™ì´ `ResultSet` ê°ì²´ì˜ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ê° ì—´(column)ì˜ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\n`RowMapper`ëŠ” ê°œë°œìê°€ ì§ì ‘ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤.\nê°œë°œìëŠ” `ResultSet`ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì™€ì„œ ê°ì²´ì˜ í•„ë“œì— ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.","x":5160,"y":-2789,"width":1392,"height":284},
		{"id":"49c6403f319aac62","type":"text","text":"# Refactory ì œì•ˆ \n- checkUser ë©”ì„œë“œ ìƒì„±í•´ì„œ ì•„ì´ë””, ë¹„ë²ˆë§Œ ë„˜ê²¨ì„œ\n- ë¶ˆì¼ì¹˜í•˜ë©´ í•¸ë“¤ë§í•˜ëŠ” ì½”ë“œ ì“°ê³ \n- ì¼ì¹˜í•˜ë©´ ì•„ì´ë””ë§Œ ê°€ì ¸ì˜¤ëŠ” ì½”ë“œì‘ì„±","x":3920,"y":-754,"width":359,"height":308},
		{"id":"8fc3aa15e94bf142","type":"text","text":"### í¼ ì‘ì„±í•˜ê³  ë²„íŠ¼ ëˆ„ë¥´ë©´ ì‹¤í–‰ë¨ ","x":1280,"y":-1136,"width":489,"height":50},
		{"id":"3c962943a9740d7c","type":"text","text":"# ê°œì„ í•´ì•¼ í•  ì‚¬í•­\n- ë¹ˆ í•„ë“œ ì£¼ì… ë§ê³  ìƒì„±ì ì£¼ì…ìœ¼ë¡œ ","x":-6080,"y":-1750,"width":459,"height":280},
		{"id":"dda97059d4fd693a","type":"text","text":"# íšŒì›ê´€ë¦¬\n- ê¸°ì—…\n- ê°œì¸ì´ë‘ enum ìƒì„±í•˜ê³ \n- ìœ ì € ê´€ë¦¬ ì„œë¹„ìŠ¤ ë§Œë“¤ê³ \n- dtoë¥¼ ìœ ì €, ê¸°ì—… ë”°ë¡œ ë§Œë“¤ê³ \n- ê·¸ ì•ˆì—ì„œ  íƒ€ì… êµ¬ë¶„í•´ì„œ í•´ë‹¹ dto ì‹¤í–‰í•˜ëŠ” ì‹ìœ¼ë¡œ \n- ","x":3920,"y":-446,"width":520,"height":266},
		{"id":"227af17cd18a14e3","type":"text","text":"ë°ì´í„° listë¡œ  ë°›ì•„ì™€ì„œ ë„˜ê¸°ê¸°   ","x":3320,"y":-560,"width":322,"height":60},
		{"id":"5ee8548fa4e38cee","x":2355,"y":-180,"width":491,"height":266,"type":"text","text":"```java\nif (user.isEmpty()) {\n\nlog.info(\"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\");\n\nreturn \"redirect:login?error=true\";\n\n}\n```"},
		{"id":"e7e3abf1f3b04cb2","x":2160,"y":-1563,"width":394,"height":72,"type":"text","text":"## @PostMapping(\"/login_yn\")"},
		{"id":"2db17c65067637ca","type":"text","text":"# MemController","x":2160,"y":-1620,"width":297,"height":57}
	],
	"edges":[
		{"id":"dbe65268fcf3c488","fromNode":"c43dc24825c78d05","fromSide":"right","toNode":"71dc42c610125534","toSide":"left"},
		{"id":"4c7ccc1fc23dcf72","fromNode":"71dc42c610125534","fromSide":"right","toNode":"0f128f8dd6b42b11","toSide":"left"},
		{"id":"c74490ab402f17e4","fromNode":"3e993d14296bbd08","fromSide":"right","toNode":"1a65f24c1edf15a4","toSide":"left"},
		{"id":"a24b3ffb69d878f5","fromNode":"0f128f8dd6b42b11","fromSide":"top","toNode":"bf688592c2b48fc9","toSide":"bottom"},
		{"id":"df86564bb9d914fd","fromNode":"0f128f8dd6b42b11","fromSide":"bottom","toNode":"71dc42c610125534","toSide":"bottom"},
		{"id":"22ceb27edc44182a","fromNode":"3e993d14296bbd08","fromSide":"bottom","toNode":"0f128f8dd6b42b11","toSide":"top"},
		{"id":"7c23f8b0550e12bf","fromNode":"71dc42c610125534","fromSide":"bottom","toNode":"5ee8548fa4e38cee","toSide":"top"}
	]
}